> **部门：尚硅谷大前端教学部**
> 
> **作者：李晶**

## 一、Dom的基本介绍

### 1.  什么是Dom

文档：html标签

对象：把标签变成了对象

模型：以另一种形式展示的对象

我们操作对象的属性 来 修改html的属性

把html标签变成一个对象 然后操作对象的属性  操作完毕之后  html标签就跟着变

​    文档对象模型，英文全称为Document Object Model，它提供了对文档的结构化的表述，并定义了一种方式可以使从程序中对该结构进行访问，从而改变文档的结构，样式和内容。

D：Document，文档，表示的整个Html的网页文档

O：Object, 对象，将网页的每一部分（标签）转换为每一个对象

M：Model，模型，使用模型来表示对象之间的关系，方便我们获取。

DOM 将文档解析为一个由节点和对象（包含属性和方法的对象）组成的结构集合。简言之，它会将web页面和脚本或程序语言连接起来，让脚本来操作页面，使用js代码将页面的样式，内容，结构修改。

通过一些js的方法来获取标签的对象（documet.getElementById()）,然后调用属性和方法修改原来标签的样式和内容，结构。

### 2. 相关概念

当创建好一个页面并加载到浏览器时，DOM就悄然而生，它会把网页文档（html页面）转换为一个文档对象，主要功能是处理网页内容。

也就是当加载浏览器的那一刻，所有的HTML标签都变成了DOM对象

在这个文档对象里，所有的元素呈现出一种层次结构，就是说**除了顶级元素html外，其他所有元素都被包含在另外的元素中**

假如有这么一段html代码：

```html
<html>
      <head>
              <title>文档标题</title>
      </head>

      <body>
              <a href=“”>我的链接</a>
              <h1>我的标题</h1>
      </body>
</html>
```

那么它的树就应该是下面这样的一颗倒长的树。

一颗家谱树，而家谱树本身就是一种模型，其典型用法是表示表示人类家族谱系。

它很容易表明家族成员之间的关系，把复杂的关系简明地表示出来，因此这种模型非常适合表示一份html的文档：

![01](.\img\01.png)

- window是浏览器窗口对象，所有东西都被当作是window的子对象

- **文档对象document  是window下的一个属性  代表整个DOM文档对象**

- 根元素（root）   html标签

- 文档树(dom树)  以HTML为根节点  形成的一棵倒立的树状结构，我们称作DOM树；这个树上所有的东西都叫节点，节点有很多类（节点共12类）
  
  - 元素节点       标签
  
  - 属性节点       属性
  
  - 文本节点       内容
  
  - 注释节点       注释  
    
    这些节点如果我们通过DOM方法去获取或者其它的操作去使用的话，就叫DOM对象

## 二、Dom的基本使用

### 1. window.onload

#### 1.1 使用场景

​    我们都知道页面的代码顺序是从上往下进行加载，很多时候我们要对页面中的某一个模块进行操作，这时候我们常常使用javascript代码来进行操作。为了能够保证操作的模块或对象在js代码之前就加载了，我们不得不把js代码放在页面的底端。但是我们在设计页面的时候，为了把js代码放在一起，或者一个让页面更加简洁的位置，那就有可能将js写在body之前，会出现代码中操作的对象未被加载的情况，那么我们该如何去解决呢？这时候window.onload就被有了存在的意义了。

#### 1.2 是什么？

​    window.onload是一个事件，在文档加载完成后能立即触发，并且能够为该事件注册事件处理函数。将要对对象或者模块进行操作的代码存放在处理函数中。即：window.onload =function (){这里写操作的代码};

#### 1.3 案例

+ 在js代码执行的时候，而对象还未被加载，导致相当于无操作的实例：

```html
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>使用window.onload()，操作对象 未被加载</title>
        <script type="text/javascript">
                document.getElementById("s").style.color = "green";
        </script>
    </head>
    <body>
        <span id="s">兄弟，你要坚强，当然是选择原谅他啊！！！</span>
    </body>
</html>
```

+ 使用window.onload()方法处理的情况的实例：

```html
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>使用window.onload()，操作对象 已被加载</title>
        <script type="text/javascript">
            window.onload = function() {
                document.getElementById("s").style.color = "green";
            };
        </script>
    </head>
    <body>
        <span id="s">大哥，你要坚强，当然是选择原谅他啊！！！</span>
    </body>
</html>
```

### 2. 获取Dom对象，操作元素属性

#### 2.1 document.getElementById

​    这个是document下的一个方法，通过id获取到相关元素  封装为dom对象返回，如果没有id则没办法获取，这个方法只能获取一个dom元素对象。

#### 2.2 点击事件onclick

**事件三要素**     

​    事件源 （承受事件的对象）          

​    事件类型onclick           

​    事件处理回调函数    回调函数就是不需要调用就自己执行的函数

**事件处理三大步**      

​    获取事件源DOM对象   

​    添加对应事件监听（onclick）   

​    书写处理回调

**事件写好之后可以重复触发执行；**

​         案例练习1：  点击按钮实现一个数字自增

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <button id="btn">按钮</button>

        <script type="text/javascript">
            window.onload = function() {
                var btn = document.getElementById('btn');
                var n = 0;
                btn.onclick = function() {
                    n++;
                    console.log(n);
                }
            }
        </script>
    </body>
</html>
```

​    案例练习2：点击加号按钮和减号按钮

#### 2.3 案例

+ 修改dom对象的原生属性---普通属性
  
  **点击按钮修改图片的路径**

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>

        <img src="img/01.jpg" id="imgSrc" />

        <a href="https://www.baidu.com" id="aa">点我</a>

        <button id="btn">按钮</button>

        <script type="text/javascript">
            //点击按钮修改图片的路径 a标签的href 及 id   
            //没有特殊说明都可以这样操作
            window.onload = function() {
                var btn = document.getElementById('btn');
                var imgNode = document.getElementById('imgSrc');
                var aNode = document.getElementById('aa');

                btn.onclick = function() {
                    imgNode.src = 'img/02.jpg';
                    //imgNode['src'] = 'img/02.jpg';
                    aNode.href = 'http://www.atguigu.com/';
                }
            }
        </script>
    </body>
</html>
```

+ 修改dom对象的原生属性---特殊属性1
  
  注意观察页面标签属性是否添加。 
  
  **点击按钮修改多选框选中**

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>

        <input type="checkbox" id="check"/> <br />
        <button id="btn">按钮</button>

        <script type="text/javascript">
        //点击按钮修改多选框选中
            window.onload = function(){
                var btn = document.getElementById('btn');
                var inputNode = document.getElementById('check');

                btn.onclick = function(){
                    //元素当中的属性和属性值相同的这种属性，js操作的时候值使用true和false
                    // 注意使用checked也是可以的  但是后期会有问题！！！
                     inputNode.checked = true;
                }
            }

        </script>
    </body>
</html>
```

+ 修改dom对象的原生属性---特殊属性2
  
  **点击修改p标签的背景颜色（通过改变类名实现）**
  
  **在JS当中不叫class 叫className**

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            .p1{
                background-color: red;
            }
            .p2{
                background-color: green;
            }
            .p3{
                background-color: blue;
            }
        </style>
    </head>
    <body>
        <p class="p1" id="pp">欢迎来到红浪漫</p>

        <script type="text/javascript">
        //点击p修改p的背景色，通过类名实现
            window.onload = function(){
                var pNode = document.getElementById('pp');
                pNode.onclick = function(){
                    //天生属性之特殊属性 class类属性，
                    // pNode.class = 'p2';
                    // pNode['class'] = 'p2';
                    //在js当中不叫class 叫className
                    // pNode.className = 'p2';
                    pNode['className'] = 'p3';
                }
            }    
        </script>
    </body>
</html>
```

+ 修改dom对象的自定义属性
  
  setAttribute和getAttribute的用法
  
  - getAttribute 获取自定义属性
  
  - setAttribute 设置自定义属性

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            .p1{
                background-color: red;
            }
            .p2{
                background-color: green;
            }
        </style>
    </head>
    <body>
        <p class="p1" id="pp" aa="bb">我是一个段落</p>
        <script type="text/javascript">
            window.onload = function() {
                var pNode = document.getElementById('pp');
                pNode.onclick = function() {
                    //对于天生的属性无论是一般属性还是特殊属性 都可以使用点语法和[]去操作
                    //                    this.id = 'ppp';
                    //                    pNode.className = 'p2';

                    //自定义属性，没办法是用点语法和[]语法：
                    //                    this.aa = 'cc';
                    //                    this['aa'] = 'cc';

                    //对于自定义的属性，只能用下面两个方法去读写：
                    //                    console.log(this.getAttribute('aa'));//读取属性的属性值
                    //                    this.setAttribute('aa','cc')//设置属性的属性值

                    //这两个方法是通用的，天生的属性也可以使用,并且类名直接使用class不用改为className
                    this.setAttribute('id', 'ppp');
                    this.setAttribute('class', 'p2');
                }
            }
        </script>
    </body>
</html>
```

### 3. 获取Dom对象的6种方法

+ document.getElementById                         <!--通过id属性获取dom对象-->             
+ document.getElementsByTagName          <!--通过标签名字获取dom对象-->  
+ document.getElementsByClassName       <!--通过class属性获取dom对象-->  
+ document.getElementsByName                <!--通过name属性获取dom对象-->  
+ document.querySelector                             <!--通过选择器获取dom对象-->  
+ document.querySelectorAll                         <!--通过选择器获取dom对象-->  

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <ul>
            <li class="sing">我是列表项1</li>
            <li class="sing">我是列表项2</li>
            <li class="sing" id="single">我是列表项3</li>
            <li class="sing" name="singName">我是列表项4</li>
            <li name="singName">我是列表项5</li>
        </ul>

        <script type="text/javascript">
            window.onload = function(){
                //通过id获取一个dom对象
                // var liNode = document.getElementById('single');
                // console.log(liNode);

                //通过标签名获取多个dom对象组成的一个伪数组
                // var liNodes = document.getElementsByTagName('li');
                // console.log(liNodes);
                // console.log(liNodes[2]);

                //通过类名去获取，获取的也是多个dom对象组成的伪数组
                // var liNodes = document.getElementsByClassName('sing');
                // console.log(liNodes);
                // console.log(liNodes[2]);

                // 通过name属性来获取对象
                // var liNodes = document.getElementsByName('singName');
                // console.log(liNodes);
                // console.log(liNodes[1]);

                //通过css选择器去获取元素形成dom对象，只要选择器能选中，就获取；

                //document.querySelector只能拿到一个dom对象，如果选择器选中多个，只拿第一个；
                // var liNode = document.querySelector('#single');
                // var liNode = document.querySelector('li:nth-child(3)');
                // console.log(liNode);

                //document.querySelectorAll获取多个使用，返回的是一个伪数组，即使只有一个返回的也是伪数组
                // var liNodes = document.querySelectorAll('.sing');
                // console.log(liNodes);
            }
        </script>
    </body>
</html>
```

### 4. 操作元素内容

#### 4.1 操作单个元素的内容

innerText和innerHTML的基本使用

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <p>
            我是尚硅谷
            <span>
                前端讲师
            </span>
        </p>
        <script type="text/javascript">
            window.onload = function() {
                var pNode = document.querySelector('p');

                pNode.onclick = function() {
                    //读：
                    //如果获取的元素当中没有其它的元素
                    //那么这两个都是直接获取文本（innerHTML获取的东西带空白和换行，innerText不带）
                    //console.log(this.innerText);//如果内部有其他标签，只是获取标签内部的所有文本，标签不会获取
                    //console.log(this.innerHTML);//如果内部有其他标签，文本和标签都会获取


                    //写：
                    //如果设置的内容当中没有标签内容
                    //那么这两个都是直接把p当中所有的东西替换成文本内容
                    //this.innerText = '红浪漫晶哥';
                    //this.innerHTML = '红浪漫晶哥';
                    //this.innerText = '<h1>红浪漫晶哥</h1>';//如果设置的内容当中有其他标签内容，那么标签是原样字符串显式在页面上；
                    this.innerHTML = '<h1>红浪漫晶哥</h1>'; //如果设置的内容当中有其他标签内容，那么标签是在页面上渲染生效的；
                }
            }
        </script>
    </body>
</html>
```

#### 4.2 操作多个元素的内容

+ 点击第一个p标签，然后将所有的p标签的内容修改为哈哈
  
  ```html
  <!DOCTYPE html>
  <html>
      <head>
          <meta charset="UTF-8">
          <title></title>
      </head>
      <body>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <script type="text/javascript">
              //点击第一个p,所有的p内容全部改为哈哈
              window.onload = function() {
                  //第一步，拿到所有的p
                  var pNodes = document.querySelectorAll('p');
                  //第二步，对第一个p标签添加点击事件监听
                  pNodes[0].onclick = function() {
                      for (var j = 0; j < pNodes.length; j++) {
                          pNodes[j].innerHTML = '哈哈';
                      }
                  }
              }
          </script>
      </body>
  </html>
  ```

+ 点击任意一个p标签，然后将所有的p标签的内容修改为哈哈
  
  ```html
  <!DOCTYPE html>
  <html>
      <head>
          <meta charset="UTF-8">
          <title></title>
      </head>
      <body>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <script type="text/javascript">
              //点击任意的p,所有的p内容全部改为哈哈
              window.onload = function() {
                  //第一步，拿到所有的p
                  var pNodes = document.querySelectorAll('p');
                  for (var i = 0; i < pNodes.length; i++) {
                      //外层for循环执行的时候，内部的函数是不执行的
                      pNodes[i].onclick = function() {
                          //函数内部执行是点击p之后才会执行
                          //点击任何的p，都是让所有的p内容变为哈哈
                          for (var j = 0; j < pNodes.length; j++) {
                              pNodes[j].innerHTML = '哈哈';
                          }
                      }
                  }
              }
          </script>
      </body>
  </html>
  ```

#### 4.3 排他思想操作多个元素

+ 方案1
  
  ```html
  <!DOCTYPE html>
  <html>
      <head>
          <meta charset="UTF-8">
          <title></title>
      </head>
      <body>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <script type="text/javascript">
              //点击任意的p,点击的这一个p变成哈哈，其余的p变成呵呵
              //排它思想
              //1、先让所有的元素处于同样的状态
              //2、再让那个特殊的自己改变
  
              window.onload = function() {
                  //第一步，拿到所有的p
                  var pNodes = document.querySelectorAll('p');
                  //第一种采用this
                  for (var i = 0; i < pNodes.length; i++) {
                      pNodes[i].onclick = function() {
                          //排它 先让所有的变成哈哈
                          for (var j = 0; j < pNodes.length; j++) {
                              pNodes[j].innerText = '呵呵';
                          }
  
                          //接着再让点击的那一个变成哈哈
                          //不能使用pNodes[i]，函数内部是点击的时候执行的，而点击的时候外部循环早都执行完了
                          //外部循环变量i都已经不是你想的那个了
                          //                        console.log(i);
                          //                        pNodes[i].innerHTML = '哈哈';
  
                          this.innerHTML = '哈哈';
                      }
                  }
              }
          </script>
      </body>
  </html>
  ```

+ 方案2
  
  ```html
  <!DOCTYPE html>
  <html>
      <head>
          <meta charset="UTF-8">
          <title></title>
      </head>
      <body>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <p>嘿嘿</p>
          <script type="text/javascript">
              //点击任意的p,点击的这一个p变成哈哈，其余的p变成呵呵
              //排它思想
              //1、先让所有的元素处于同样的状态
              //2、再让那个特殊的自己改变
  
              window.onload = function() {
                  //第一步，拿到所有的p
                  var pNodes = document.querySelectorAll('p');
                  for (var i = 0; i < pNodes.length; i++) {
                      pNodes[i].index = i; //循环的时候，把每个dom对象的下标，存储在这个对象身上的一个属性当中
                      pNodes[i].onclick = function() {
                          //排它 先让所有的变成哈哈
                          for (var j = 0; j < pNodes.length; j++) {
                              pNodes[j].innerText = '呵呵';
                          }
                          pNodes[this.index].innerHTML = '哈哈';
                      }
                  }
  
              }
          </script>
      </body>
  </html>
  ```

+ 排他思想实现轮播小圆点切换
  
  ```html
  <!DOCTYPE html>
  <html>
      <head>
          <meta charset="UTF-8">
          <title></title>
          <style>
              /*css初始化*/
  
              /*清除默认边距*/
              *{
                  margin: 0;
                  padding: 0;
              }
  
              /*列表样式：无*/
              ul,li{
                  list-style: none;
              }
                /*将元素显示为块级元素*/
              img{
                  display: block;
              }
                /*删除下划线*/
              a{
                  text-decoration: none;
              }
              /*定义无轮廓*/
              input{
                  outline: none;
              }
              .clearFix:after{
                  content: '';
                  display: block;
                  clear: both;
              }
  
              .list{
                  /*所有的样式都先考虑宽和高*/
                  overflow: hidden;
              }
  
              .list li{
                  float: left;
                  width: 40px;
                  height: 40px;
                  border-radius: 50%;
                  margin-right: 10px;
                  background-color: gray;
              }
              .list li.current{
                  background-color: red;
              }
  ```

          </style>
      </head>
      <body>
          <ul class="list">
              <li class="current"></li>
              <li></li>
              <li></li>
              <li></li>
              <li></li>
          </ul>
    
          <script type="text/javascript">
    
          </script>
      </body>

</html>
  ```

  js实现：

```js
window.onload = function() {
                var liNodes = document.querySelectorAll('.list li');

                for (var i = 0; i < liNodes.length; i++) {
                    liNodes[i].onclick = function() {
                        //先让所有的变灰
                        for (var j = 0; j < liNodes.length; j++) {
                            liNodes[j].className = '';
                        }
                        //再让点击的那一个变红
                        this.className = 'current';
                    }
                }
            }
```

#### 4.4 鼠标事件

+ onclick                                                 <!--点击-->
+ ondblclick                                            <!--双击-->
+ oncontextmenu                                 <!--右击-->
+ onmousemove                                  <!--鼠标移动-->
+ onmouseover/onmouseout            <!--鼠标移入移出-->
+ onmouseenter/onmouseleave       <!--鼠标移入移出-->
+ onmousedown/onmouseup            <!--鼠标点击和抬起-->

案例1：点击按钮修改div元素的宽高以及背景色

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }

            div{
                width: 300px;
                height: 300px;
                background-color: green;
            }
        </style>
    </head>
    <body>
        <div></div>
        <button>按钮</button>

        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
window.onload = function() {
                var btn = document.querySelector('button');
                var box = document.querySelector('div');

                btn.onclick = function() {
                    //js操作的样式都是行内样式
                    //一般我们去修改样式用的就是下面这样的写法
                    box.style.width = '500px';
                    box.style.height = '500px';
                    box.style.backgroundColor = 'red';
                }
            }
```

案例2：鼠标移入高亮显示

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }

            ul,li{
                list-style: none;
            }

            a{
                text-decoration: none;
            }

            .list{
                width: 200px;
                height: 150px;
                border: 1px solid black;
            }
            .list li{
                width: 200px;
                height: 50px;
                background-color: hotpink;
                text-align: center;
                line-height: 50px;
            }

            .list li:nth-child(2){
                border-top: 1px solid black;
                border-bottom: 1px solid black;
                box-sizing: border-box;
            }

            .list li a{
                font-size: 20px;
                color: white;
            }

        </style>
    </head>
    <body>
        <ul class="list">
            <li><a href="javascript:;">大哥的桂芬</a></li>
            <li><a href="javascript:;">大哥的秀琴</a></li>
            <li><a href="javascript:;">大哥的诸葛钢铁</a></li>
        </ul>

        <script type="text/javascript">

        </script>

    </body>
</html>
```

js实现：

```js
window.onload = function() {
                var liNodes = document.querySelectorAll('.list li');
                for (var i = 0; i < liNodes.length; i++) {
                    liNodes[i].onmouseover = function() {
                        this.style.backgroundColor = 'red';
                    };
                    liNodes[i].onmouseout = function() {
                        this.style.backgroundColor = 'green';
                    }
                }
            }
```

案例3：隔行变色

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <table>
            <tr>
                <th>班级</th>
                <th>姓名</th>
                <th>年龄</th>
            </tr>

              <tr>
                <td>一班</td>
                <td>迷你马</td>
                <td>20</td>
            </tr>

            <tr>
                <td>一班</td>
                <td>小马</td>
                <td>20</td>
            </tr>
            <tr>
                <td>一班</td>
                <td>中马</td>
                <td>21</td>
            </tr>
            <tr>
                <td>一班</td>
                <td>老马</td>
                <td>22</td>
            </tr>
        </table>

        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
window.onload = function(){
                //拿到所有的tr
                var trNodes = document.querySelectorAll('tr');
                for(var i = 0; i < trNodes.length; i++){
                    if(i % 2 == 0){
                        trNodes[i].style.backgroundColor = 'red';
                    }else{
                        trNodes[i].style.backgroundColor = 'green';
                    }
                }
            }
```

案例4：开关状态改变div背景色

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }

            #box{
                width: 300px;
                height: 300px;
                background-color: red;
            }
        </style>
    </head>
    <body>
        <div id="box">

        </div>
        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
window.onload = function() {
                var box = document.getElementById('box');
                //true就代表盒子目前是红色的，false就代表盒子目前是绿色的
                var flag = true;

                box.onclick = function() {
                    if (flag) {
                        //代表目前是红色的，需要改成绿色的
                        box.style.backgroundColor = 'green';
                        flag = false;
                    } else {
                        //代表目前是绿色的，需要改成红色的
                        box.style.backgroundColor = 'red';
                        flag = true;
                    }
                    // flag = !flag;
                }
            }
```

案例5：开关实现显示和隐藏div 

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }

            #box{
                width: 300px;
                height: 200px;
                background-color: hotpink;
                transform: skew(0deg);
                /*
                 * 隐藏元素的方式
                display: none;   不占位
                visibility: hidden;  占位
                opacity: 0;  透明度位0
                transform: translateX(-10000px);
                transform: scale(0);
                transform: rotateY(90deg);
                transform: skew(90deg);
                width: 0;
                height: 0;*/
            }
        </style>
    </head>
    <body>
        <div id="box"></div>
        <button id="btn">显示/隐藏</button>
        <script type="text/javascript">

        </script>

    </body>
</html>
```

js实现：

```js
window.onload = function() {
                var btn = document.querySelector('#btn');
                var box = document.getElementById('box');

                var flag = true; //代表盒子目前显示
                btn.onclick = function() {
                    if (flag) {
                        box.style.visibility = 'hidden';
                    } else {
                        box.style.visibility = 'visible';
                    }
                    flag = !flag;
                }
            }
```

#### 4.5 兼容性封装读写内容

**浏览器的兼容性：**

+ Chrome  fireFox  IE   safari  opera

**浏览器分为高级浏览器和低级浏览器：**

+ 以IE8为分水岭，包含IE8在内以下的就是低级浏览器
+ IE8以上和其它的都是高级浏览器

**innerText和textContent区别？**

+ innerText和textContent都是用来操作元素的文本（不会包含标签）
+ textContent可以获取到隐藏的元素的内容，innnerText获取不到
+ textContent只有高级浏览器才能用
+ innnerText所有浏览器都能用

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <p id="p1">小马</p>
        <p style="visibility: hidden;" id="p2">老马</p>
        <script type="text/javascript">
            window.onload = function() {
                //var pNodes = document.querySelectorAll('p');
                var p1 = document.getElementById('p1');
                var p2 = document.getElementById('p2'); //通过id获取元素的方法，高低都支持
                console.log(p1.innerText);
                console.log(p2.innerText); //拿不到隐藏的元素内容

                //console.log(p1.textContent);
                //console.log(p2.textContent);//可以拿到隐藏的元素内容，但是只有高级浏览器认识
            }
        </script>
    </body>
</html>
```

### 5. 键盘事件

+ onkeyup          <!--按键抬起-->
+ onkeydown     <!--按键落下-->
+ onfocus           <!--获取焦点-->
+ onblur             <!--失去焦点-->

#### 5.1 onkeyup和onkeydown使用

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <input type="text" />
        <!--键盘事件除了给表单类元素添加以外还能给document-->

        <script type="text/javascript">
            window.onload = function(){
                var inputNode = document.querySelector('input');

//                inputNode.onkeydown = function(){
//                    console.log('按下');//如果按下不放，那么这个按下事件是重复触发
//                }

                inputNode.onkeyup = function(){
                    console.log('抬起');//只会触发一次，用的比较多，可以保证事件函数只执行一次
                }
            }
        </script>
    </body>
</html>
```

#### 5.2 keyCode键码

​    存在于事件对象当中，也就是我们回调函数的第一个形参；这个对象不是我们创建，当事件发生的时候，系统会创建好这个事件对象，并且传参（实参）调用；事件对象当中包含了和事件相关的一切，说的通俗一些就是根据键码判断当前的按键是什么。

**案例:** 如果输入的是回车则打印回车，如果输入的是shift那么就打印shift

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <input type="text" />

        <script type="text/javascript">
            window.onload = function() {
                var inputNode = document.querySelector('input');

                inputNode.onkeyup = function(e) {
                    //与其说我们在讲键盘事件，不如说我们在讲怎么区分哪个键的事件
                    //区分哪个键，我们需要通过键码去区分
                    //键码在事件对象当中：每一个事件触发的时候都会有独立事件对象
                    //  事件对象就是回调函数的第一个参数，所有的事件触发的时候都会有这个对象
                    //  事件对象是一个对象，不是我们自己封装的对象，而是当触发事件的时候，系统会
                    //  自动的帮我们把和这一次触发事件相关的信息封装为 一个对象
                    //  系统会调用我们的回调函数，会把这个事件对象传给回调函数的第一个形参
                    //    console.log(e);
                    //如果是回车，那么就打印回车
                    if (e.keyCode === 13) {
                        console.log('回车')
                    } else if (e.keyCode === 16) {
                        console.log('shift')
                    }
                }
            }
        </script>
    </body>
</html>
```

#### 5.3 onfocus和onblur

+ onfocus获取焦点
+ onblur  失去焦点

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }
            input{
                outline: none;
            }    
        </style>
    </head>
    <body>
        <input type="text" value="老马大哥" />
        <script type="text/javascript">
            //获取焦点的时候，input当中的值字体颜色为green  背景色为red  
            //失去焦点的时候，input当中的值字体颜色和背景色都随机变色（变色龙）
            window.onload = function() {
                var inputNode = document.querySelector('input');
                //获取焦点事件
                inputNode.onfocus = function() {
                    this.style.color = 'green';
                    this.style.backgroundColor = 'red';
                };
                //失去焦点事件.
                inputNode.onblur = function() {
                    //给字体颜色求的随机颜色
                    var red1 = Math.floor(Math.random() * 256);
                    var green1 = Math.floor(Math.random() * 256);
                    var blue1 = Math.floor(Math.random() * 256);
                    //给背景颜色求的随机颜色
                    var red2 = Math.floor(Math.random() * 256);
                    var green2 = Math.floor(Math.random() * 256);
                    var blue2 = Math.floor(Math.random() * 256);
                    //设置随机颜色
                    this.style.color = 'rgb(' + red1 + ',' + green1 + ',' + blue1 + ')';
                    this.style.backgroundColor = 'rgb(' + red2 + ',' + green2 + ',' + blue2 + ')';
                };
            }
        </script>
    </body>
</html>
```

### 6. 案例练习

+ 全选，全不选，反选

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body>
        <input type="checkbox" id="c1"/>
        <label for="c1">抽烟</label>

        <label>
            <input type="checkbox" />喝酒
        </label>

        <label>
            <input type="checkbox" />烫头
        </label>

        <label>
            <input type="checkbox" />打豆豆
        </label>

        <br />        
        <button>全选</button>
        <button>全不选</button>
        <button>反选</button>

        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
    window.onload = function(){
                var btns = document.querySelectorAll('button');
                var inputNodes = document.querySelectorAll('input');
                //全选
                btns[0].onclick = function(){
                    for(var i = 0; i < inputNodes.length; i++){
                        inputNodes[i].checked = true;
                    }
                }
                //全不选
                btns[1].onclick = function(){
                    for(var i = 0; i < inputNodes.length; i++){
                        inputNodes[i].checked = false;
                    }
                }

                //反选
                btns[2].onclick = function(){
                    for(var i = 0; i < inputNodes.length; i++){
                        inputNodes[i].checked = !inputNodes[i].checked;
                    }
                }
            }
```

+ 轮播的渐变

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }
            ul,li{
                list-style: none;
            }

            img{
                display: block;
                /*vertical-align: middle;*/
            }

            a{
                text-decoration: none;
            }

            input{
                outline: none;
            }

            .clearFix:after{
                content: '';
                display: table;
                clear: both;
            }

            #box{
                position: relative;
                width: 600px;
                height: 300px;
                margin: 50px auto;
                overflow: hidden;
            }

            #box .list{
                width: 3000px;
                height: 300px;
            }

            #box .list li{
                float: left;
                width: 600px;
                height: 300px;
            }

            #box .list li img{
                width: 600px;
                height: 300px;
            }


            #box span{
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                width: 50px;
                height: 100px;
                background-color: rgba(200,200,200,.7);
                font-size: 50px;
                text-align: center;
                line-height: 100px;
                color: white;
                opacity: 0;
                transition: opacity 10s;
            }
            #box .left{
                left: 0;
            }
            #box .right{
                right: 0;
            }

            #box .iconList{
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                bottom: 10px;
                overflow: hidden;
            }

            #box .iconList li{
                float: left;
                width: 40px;
                height: 40px;
                margin-right: 10px;
                border-radius: 50%;
                background-color: gray;
            }

            #box .iconList li.current{
                background-color: red;
            }


        </style>
    </head>
    <body>
        <div id="box">
            <ul class="list">
                <li><img src="img/1.jpg"/></li>
                <li><img src="img/2.jpg"/></li>
                <li><img src="img/3.jpg"/></li>
                <li><img src="img/4.jpg"/></li>
                <li><img src="img/5.jpg"/></li>
            </ul>

            <span class="left">  <  </span>
            <span class="right">  >  </span>


            <ul class="iconList">
                <li class="current"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>

        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
window.onload = function(){
                var box = document.getElementById('box');
                var spanNodes = document.querySelectorAll('#box span');
                //移入
                box.onmouseenter= function(){
                    spanNodes[0].style.opacity = 1;
                    spanNodes[1].style.opacity = 1;
                };
                //移出
                box.onmouseleave = function(){
                    spanNodes[0].style.opacity = 0;
                    spanNodes[1].style.opacity = 0;
                };
            }
```

+ 二级菜单鼠标移入一级显示对应的二级菜单

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }
            ul,li{
                list-style: none;
            }
            a{
                text-decoration: none;
                color: white;
            }

            .list{
                position: relative;
                width: 200px;
                height: 150px;
                border: 1px solid black;
            }

            .list>li{
                width: 200px;
                height: 50px;
                background-color: hotpink;
                text-align: center;
                line-height: 50px;
            }


            .list>li:nth-child(2){
                border-top: 1px solid black;
                border-bottom: 1px solid black;
                box-sizing: border-box;
            }

            .list>li .listIn{
                position: absolute;
                left: 200px;
                top: -1px;
                width: 200px;
                height: 150px;
                border: 1px solid purple;
                display: none;
            }

            .list li .listIn li{
                width: 200px;
                height: 50px;
                background-color: skyblue;
            }
            .list li .listIn li:nth-child(2){
                border-top: 1px solid purple;
                border-bottom: 1px solid purple;
                box-sizing: border-box;
            }


        </style>
    </head>
    <body>
        <ul class="list">
            <li>
                <a href="javascript:;">家电</a>    
                <ul class="listIn">
                    <li><a href="javascript:;">电视</a></li>
                    <li><a href="javascript:;">冰箱</a></li>
                    <li><a href="javascript:;">洗衣机</a></li>
                </ul>
            </li>

            <li>
                <a href="javascript:;">衣服</a>    
                <ul class="listIn">
                    <li><a href="javascript:;">男装</a></li>
                    <li><a href="javascript:;">女装</a></li>
                    <li><a href="javascript:;">童装</a></li>
                </ul>
            </li>

            <li>
                <a href="javascript:;">数码</a>    
                <ul class="listIn">
                    <li><a href="javascript:;">照相机</a></li>
                    <li><a href="javascript:;">笔记本</a></li>
                    <li><a href="javascript:;">手机</a></li>
                </ul>
            </li>
        </ul>


        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
//移入哪一个一级的li，让对应的这个li下的二级ul显示
            //移出再消失

            window.onload = function(){
                var liNodes = document.querySelectorAll('.list>li');
                var ulNodes = document.querySelectorAll('.list>li .listIn');

                for(var i = 0; i < liNodes.length; i++){
                    liNodes[i].index = i;
                    liNodes[i].onmouseover = function(){
                        //让移入的这个li对应的二级菜单显示出来
                        //移入的这个li的下标刚好和要显示的二级ul下标一样
                        ulNodes[this.index].style.display = 'block'; 
                    };

                    liNodes[i].onmouseout = function(){
                        ulNodes[this.index].style.display = 'none'; 
                    }
                }

            }
```

+ 幽灵按钮

```html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <style>
            *{
                margin: 0;
                padding: 0;
            }
            #box{
                position: relative;
                width: 250px;
                height: 150px;
                background-color: red;
                margin: 50px auto;
                text-align: center;
                line-height: 150px;
                color: purple;
                font-size: 30px;
                font-weight: bold;
                transition: 2s;
            }

            #box div{
                position: absolute;
                width: 0;
                height: 30px;
                background-color: green;
                transition: 2s;
            }

            #box .topBox{
                left: 0;
                top: 0;
            }

            #box .bottomBox{
                right: 0;
                bottom: 0;
            }

        </style>
    </head>
    <body>
        <div id="box">
            懒人马大哥
            <div class="topBox"></div>
            <div class="bottomBox"></div>
        </div>

        <script type="text/javascript">

        </script>
    </body>
</html>
```

js实现：

```js
window.onload = function(){
                var box = document.getElementById('box');
                var topBox  = document.querySelector('#box .topBox');
                var bottomBox  = document.querySelector('#box .bottomBox');

                box.onmouseover = function(){
                    topBox.style.width = 250 + 'px';
                    bottomBox.style.width = 250 + 'px';
                    topBox.style.backgroundColor = 'hotpink';
                    bottomBox.style.backgroundColor = 'hotpink';
                    this.style.color = 'greenyellow';
                    this.style.backgroundColor = 'skyblue';
                };

                box.onmouseout = function(){
                    topBox.style.width = 0;
                    bottomBox.style.width = 0;
                    topBox.style.backgroundColor = 'green';
                    bottomBox.style.backgroundColor = 'green';
                    this.style.color = 'purple';
                    this.style.backgroundColor = 'red';
                };

            }
```
